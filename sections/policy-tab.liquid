{{ 'section-policy-tab.css' | asset_url | stylesheet_tag }}

<div id="section-{{ section.id }}" class="policy-tab">
  <div class="policy-tab-left">
    <div class="policy-tab-left-title">Support</div>
    <div class="policy-tab-list">
      {%- for block in section.blocks -%}
        <div class="policy-tab-list-item" data-tab="tab-{{ forloop.index }}">
          {{ block.settings.title }}
        </div>
      {%- endfor -%}
    </div>
  </div>
  <div class="policy-tab-right">
    {%- for block in section.blocks -%}
      <div
        class="policy-tab-content"
        id="tab-{{ forloop.index }}"
        {% if forloop.index != 1 %}
          style="display: none;"
        {% endif %}
      >
        {{ block.settings.content }}
      </div>
    {%- endfor -%}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // 获取所有 tab 列表项
    const tabListItems = document.querySelectorAll('.policy-tab-list-item');
    const tabContents = document.querySelectorAll('.policy-tab-content');

    // 监听 tab 点击事件
    tabListItems.forEach((item) => {
      item.addEventListener('click', function () {
        const targetTab = this.getAttribute('data-tab');

        // 隐藏所有 tab 内容
        tabContents.forEach((content) => {
          content.style.display = 'none';
        });

        // 显示当前点击的 tab 内容
        document.getElementById(targetTab).style.display = 'block';

        // 更新 tab 列表项的选中状态
        tabListItems.forEach((i) => i.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // 初始化第一个 tab 为 active
    tabListItems[0].classList.add('active');
  });
</script>

{% schema %}
{
  "name": "policy tab",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [],
  "blocks": [
    {
      "type": "tab",
      "name": "tab",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "policy tab",
      "blocks": [
        {
          "type": "tab"
        }
      ]
    }
  ]
}
{% endschema %}
